#![doc = include_str!("../README.md")]

//  Built-in function layout
//
//  .-------------------------------------------------------------> open bif
//  | .-----------------------------------------------------------> modifier
//  | |   .-------------------------------------------------------> bif name
//  | |   |   .---------------------------------------------------> bif name separator
//  | |   |   |      .--------------------------------------------> bif params
//  | |   |   |      |       .------------------------------------> params / code separator
//  | |   |   |      |       |             .----------------------> comment
//  | |   |   |      |       |             |   .------------------> bif code
//  | |   |   |      |       |             |   |               .--> close bif
//  | |   |   |      |       |             |   |               |
//  v v   v   v      v       v             |   v               v
//  - - ----- - ------------ -- -----------v------------------ --
//  {:!snippet; snippet_name >> <div>... {:* ... *:} ...</div> :}
//  -------------------------------------------------------------
//          ^  -----------------------------------------------
//          |                      ^
//          |                      |
//          |                      ·------------------------------> bif src
//          ·-----------------------------------------------------> bif: Built-in function

//  Same level Bif:
//
//                  .-----> .-----> {:code;
//                  |       |           {:code; ... :}
//                  |       |           {:code; ... :}
//                  |       |           {:code; ... :}
//  Level block --> |       ·-----> :}
//                  |        -----> {:code; ... :}
//                  |       .-----> {:code;
//                  |       |           {:code; ... :}
//                  ·-----> ·-----> :}

//  Flow
//
//      .-------------------------------.
//      │         new Template          │
//      ·-------------------------------·
//                     |
//                     v
//      .-------------------------------.
//      │       new BlockParser         │ <------.
//      |-------------------------------|        |
//      │      each same level bif      │        |
//      ·-------------------------------·        |
//                     |                         |
//                     v                         |
//      .-------------------------------.        |
//      │           new Bif             │        |
//      |-------------------------------|        |
//      │         nested bifs? ---------│--------·
//      ·-------------------------------·
//                     |
//                     v
//          .----------------------.
//         │       end render       │
//          ·----------------------·

pub use serde_json::{json, Value};

#[macro_use]
mod macros;

mod bif;
mod block_parser;
pub mod constants;
mod default_json;
pub mod doc;
mod shared;
mod template;
pub mod utils;

pub use constants::*;
pub use default_json::*;
pub use template::Template;
pub use utils::*;

// for tests
pub mod test_helpers;
